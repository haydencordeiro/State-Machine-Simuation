<html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
</script>

<body style="padding: 2%;">
    <!-- <p>Red-(N-1) Green-(n/2) Blue(n+1,in same direction)</p> -->
    <canvas id="myChart" style="max-width:80%;"></canvas>
    <!-- <input id="ip"> -->
    <!-- <button>Calculate</button> -->
    <p id="op"></p>
    <p id="nop"></p>
</body>

<script>
    var myChart = new Chart("myChart", {
        type: "line",
        data: {},
        options: {}
    });
    function return_state(val) {
        var states = [
            [0, 0.2],
            [0.2, 0.4],
            [0.4, 0.6],
            [0.6, 0.8],
            [0.8, 1]
        ]
        for (var d = 0; d < states.length; d++) {
            if (states[d][0] <= val < states[d][0]) {
                return d
            }
            // console.log(states[d],val,)
        }
        return 4
    }
    function nminusone(next, prev) {
        if (Math.abs(next - prev) > 1) {
            if (next < prev) {
                return next + 1
            }
            else {
                return next - 1
            }
        } else {
            return next
        }
    }
    function ndivideby2(next, prev) {
        return Math.floor(Math.abs(prev - next) / 2);

    }
    function nplus1divideby2(next, prev) {
        return prev + Math.floor(((next - prev) + 1) / 2);
        // return Math.floor(Math.abs(prev-next)/2);

    }
    function nmove1(next, prev) {
        if (next > prev) {
            return prev + 1
        }
        else {
            return prev - 1
        }

    }
    // function averageFunc(next, prev) {
    //     return ((prev*(i+1))+l[i])/i+2;

    //     if (next > prev) {
    //         return prev + 1
    //     }
    //     else {
    //         return prev - 1
    //     }

    // }



    var curr_state = [null, null, null]
    // var a = window.location.href.split("#")
    var a = 50
    // var l = Array.from({ length: parseInt(a[a.length - 1]) }, () => parseFloat(Math.random().toFixed(2)))
    // var l = Array.from({ length: parseInt(a) }, () => parseFloat(Math.random().toFixed(2)))
    var l=[
    0.61,
    0.6,
    0.5499999999999999,
    0.59,
    0.655,
    0.7,
    0.6499999999999999,
    0.62,
    0.565,
    0.56,
    0.575,
    0.615,
    0.665,
    0.7050000000000001,
    0.73,
    0.6799999999999999,
    0.6299999999999999,
    0.5799999999999998,
    0.54,
    0.5449999999999999,
    0.54,
    0.515,
    0.465,
    0.505,
    0.455,
    0.51,
    0.51,
    0.51,
    0.56,
    0.515,
    0.515,
    0.525,
    0.52,
    0.51,
    0.505,
    0.515,
    0.505,
    0.51,
    0.515,
    0.515,
    0.52,
    0.51,
    0.51,
    0.51,
    0.515,
    0.52,
    0.52,
    0.515,
    0.53,
    0.525,
    0.53,
    0.5449999999999999,
    0.5549999999999999,
    0.565,
    0.5449999999999999,
    0.5549999999999999,
    0.5549999999999999,
    0.53,
    0.615,
    0.6,
    0.535,
    0.59,
    0.5800000000000001,
    0.5449999999999999,
    0.595,
    0.595,
    0.61,
    0.6,
    0.64,
    0.64,
    0.64,
    0.6950000000000001,
    0.635,
    0.715,
    0.775,
    0.815,
    0.7849999999999999,
    0.72,
    0.77,
    0.7949999999999999,
    0.785,
    0.7949999999999999,
    0.735,
    0.635,
    0.685,
    0.7350000000000001,
    0.7850000000000001,
    0.755,
    0.805,
    0.755,
    0.805,
    0.8550000000000001,
    0.9299999999999999,
    0.8799999999999999,
    0.85,
    0.7999999999999999,
    0.7499999999999999,
    0.775,
    0.78,
    0.73,
    0.75,
    0.715,
    0.6444444444444445,
    0.65,
    0.7000000000000001,
    0.6799999999999999,
    0.73,
    0.78,
    0.7405555555555556,
    0.7905555555555557,
    0.8405555555555557,
    0.855,
    0.875,
    0.825,
    0.89,
    0.84,
    0.7899999999999999,
    0.88,
    0.9199999999999999,
    0.8699999999999999,
    0.8199999999999998,
    0.7233333333333333,
    0.7733333333333333,
    0.695,
    0.745,
    0.795,
    0.8450000000000001,
    0.8950000000000001,
    0.915,
    0.98,
    0.985,
    0.9349999999999999,
    0.8849999999999999,
    0.8349999999999999,
    0.7849999999999998,
    0.7611111111111111,
    0.85,
    0.8583333333333334,
    0.8083333333333333,
    0.7144444444444444,
    0.7027777777777777,
    0.7305555555555556,
    0.77,
    0.6950000000000001,
    0.725,
    0.7061111111111111,
    0.6972222222222222,
    0.6472222222222221,
    0.5972222222222221,
    0.6472222222222221,
    0.6972222222222222,
    0.7472222222222222,
    0.7972222222222223,
    0.8533333333333333,
    0.9033333333333333,
    0.8338888888888889,
    0.7977777777777777,
    0.8477777777777777,
    0.8977777777777778,
    0.995,
    0.9650000000000001,
    0.985,
    0.985,
    0.9650000000000001,
    0.995,
    0.99,
    0.94,
    0.995,
    0.98,
    0.995,
    0.99,
    0.985,
    0.98,
    0.99,
    0.94,
    0.99,
    0.995,
    0.945,
    0.8949999999999999,
    0.8183333333333334,
    0.8683333333333334,
    0.9183333333333334,
    0.99,
    0.9650000000000001,
    0.915,
    0.865,
    0.815,
    0.7649999999999999,
    0.7272222222222222,
    0.7566666666666666,
    0.7788888888888889,
    0.7622222222222222,
    0.7355555555555555,
    0.7122222222222222,
    0.6622222222222222,
    0.7227777777777777,
    0.6727777777777777,
    0.6227777777777777,
    0.5727777777777776,
    0.5227777777777776,
    0.4727777777777776,
    0.4227777777777776,
    0.3727777777777776,
    0.4227777777777776,
    0.4727777777777776,
    0.5227777777777776,
    0.5727777777777776,
    0.6227777777777777,
    0.6727777777777777,
    0.7227777777777777,
    0.7727777777777778,
    0.8227777777777778,
    0.8727777777777779,
    0.9227777777777779,
    0.8727777777777779,
    0.8172222222222222,
    0.825,
    0.8055555555555556,
    0.7972222222222223,
    0.7305555555555556,
    0.7805555555555557,
    0.7888888888888889,
    0.8305555555555555,
    0.8555555555555556,
    0.7616666666666667,
    0.7555555555555555,
    0.7838888888888889,
    0.7783333333333333,
    0.8338888888888889,
    0.7783333333333333,
    0.8338888888888889,
    0.7838888888888889,
    0.7333333333333334,
    0.7361111111111112,
    0.7861111111111112,
    0.8116666666666666,
    0.7477777777777778,
    0.7511111111111111,
    0.7844444444444445,
    0.8344444444444445,
    0.825,
    0.875,
    0.8172222222222222,
    0.7755555555555556,
    0.8255555555555556,
    0.7755555555555556,
    0.7255555555555555,
    0.6755555555555555,
    0.6255555555555554,
    0.5755555555555554,
    0.5255555555555553,
    0.47555555555555534,
    0.42555555555555535,
    0.47555555555555534,
    0.5255555555555553,
    0.5755555555555554,
    0.6255555555555554,
    0.6755555555555555,
    0.7255555555555555,
    0.7866666666666666,
    0.8166666666666667,
    0.7666666666666666,
    0.7505555555555555,
    0.8,
    0.8500000000000001,
    0.825,
    0.7333333333333334,
    0.7833333333333334,
    0.8194444444444444,
    0.8694444444444445,
    0.9194444444444445,
    1,
    1,
    1,
    0.95,
    0.8999999999999999,
    0.8499999999999999,
    0.7999999999999998,
    0.8499999999999999,
    0.7866666666666666,
    0.8422222222222222,
    0.8922222222222222,
    0.885,
    0.8300000000000001,
    0.8800000000000001,
    0.9300000000000002,
    0.8800000000000001,
    0.8300000000000001,
    0.8388888888888889,
    0.7888888888888889,
    0.8388888888888889,
    0.888888888888889,
    0.938888888888889,
    0.8588888888888889,
    0.908888888888889,
    0.8094444444444444,
    0.8594444444444445,
    0.9094444444444445,
    0.995,
    0.945,
    0.8949999999999999,
    0.8361111111111111,
    0.7777777777777778,
    0.8027777777777778,
    0.8527777777777779,
    0.9027777777777779,
    0.995,
    0.945,
    0.985,
    0.9349999999999999,
    0.8849999999999999,
    0.8349999999999999,
    0.7616666666666666,
    0.8116666666666666,
    0.8366666666666667,
    0.8866666666666667,
    0.9366666666666668,
    0.995,
    0.945,
    0.8949999999999999,
    0.945,
    0.8949999999999999,
    0.8388888888888889,
    0.888888888888889,
    0.8277777777777777,
    0.8777777777777778,
    0.7838888888888889,
    0.8338888888888889,
    0.883888888888889,
    0.8338888888888889,
    0.845,
    0.8300000000000001,
    0.7838888888888889,
    0.8338888888888889,
    0.89,
    0.84,
    0.9199999999999999,
    0.99,
    0.995,
    1,
    0.95
]

    var j = null;
    var next = null;
    var v1 = [];
    var v2 = [];
    var v3 = [];
    var v4 = [];
    var currAvg = l[0];
    var currState = 0;
    var xValues = [0];
    let temp_a=0;

    for (var i = 0; i < l.length; i++) {
        j = l[i]
        if (i == 0) {
            curr_state[0] = return_state(j)
            curr_state[1] = return_state(j)
            curr_state[2] = return_state(j)
            // curr_state[3] = return_state(j)
            // curr_state[3] = return_state(j)
            console.log(curr_state)
            v1.push(curr_state[0])
            v2.push(curr_state[0])
            v3.push(curr_state[0])
            temp_a=0;
            for(let k=0;k<=i;k++)
            {
                console.log(l[k])
                temp_a+=l[k];
            }
            v4.push(return_state(temp_a/(i+1)))


        }
        else {
            next = return_state(j)
            curr_state[0] = nminusone(next, curr_state[0])
            curr_state[1] = nplus1divideby2(next, curr_state[1])
            curr_state[2] = nmove1(next, curr_state[2])
            // curr_state[3] = averageFunc(next, curr_state[3])
            v1.push(curr_state[0])
            v2.push(curr_state[1])
            v3.push(curr_state[2])
            temp_a=0;
            for(let k=0;k<=i;k++)
            {
                console.log(l[k])
                temp_a+=l[k];
            }
            v4.push(return_state(temp_a/(i+1)))

            xValues.push(j)
            document.getElementById("nop").innerHTML = v4.toString();

        }

    }
    document.getElementById("op").innerHTML = l.toString();
    document.getElementById("nop").innerHTML = v4.toString();
    new Chart("myChart", {
        type: "line",
        data: {
            labels: xValues,
            datasets: [
                {
                    data: v1,
                    borderColor: "red",
                    fill: false,
                    label: "N-1"
                }, {
                    data: v2,
                    borderColor: "green",
                    fill: false,
                    label: "(N+1)/2"
                }, 
                // {
                //     data: v3,
                //     borderColor: "blue",
                //     fill: false
                // }
                // ,
                {
                    data: v4,
                    borderColor: "gray",
                    fill: false,
                    label: "State Average"
                }
                ,
                // {
                //     data: v4,
                //     borderColor: "pink",
                //     fill: false
                // }
            ]
        },
        options: {
            legend: { display: true }
        }
    });
    myChart.update()

</script>


</html>